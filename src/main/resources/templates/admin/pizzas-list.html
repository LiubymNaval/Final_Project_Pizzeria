<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/layout :: head('Admin - Pizze')}"></head>
<body>
<style>
    body { background-color: #0f0f0f !important; color: #ffffff !important; font-family: 'Segoe UI', sans-serif; }
    h2 { color: #e63946 !important; font-weight: 900; text-transform: uppercase; letter-spacing: 1px; }

    .btn-success { background-color: #198754 !important; border: none !important; font-weight: bold; padding: 10px 20px; border-radius: 8px; }

    .table-container { background-color: #1a1a1a; border-radius: 15px; padding: 20px; border: 1px solid #333; }
    .table { color: #ffffff !important; background-color: transparent !important; border-color: #333 !important; }

    .table tr, .table td, .table th { background-color: transparent !important; color: #ffffff !important; border-bottom: 1px solid #333 !important; padding: 12px !important; }
    .table thead th { background-color: #252525 !important; color: #e63946 !important; border-bottom: 2px solid #e63946 !important; text-transform: uppercase; font-size: 0.85rem; }

    .pizza-name { color: #e63946 !important; font-weight: bold; }
    .pizza-slug-text { color: rgba(230, 57, 70, 0.8) !important; font-family: monospace; font-size: 0.9rem; }
    .pizza-img { width: 50px; height: 50px; object-fit: cover; border-radius: 8px; border: 1px solid #444; }

    .price-badge { background-color: #000000 !important; color: #e63946 !important; border: 1px solid #e63946 !important; font-weight: bold; padding: 4px 8px; border-radius: 5px; font-size: 0.85rem; }
    .badge-active { background-color: rgba(25, 135, 84, 0.1) !important; color: #198754 !important; border: 1px solid #198754; }
    .badge-hidden { background-color: rgba(108, 117, 125, 0.1) !important; color: #adb5bd !important; border: 1px solid #adb5bd; }

    .actions-group { display: flex; gap: 8px; justify-content: center; align-items: center; }
    .btn-action { width: 38px; height: 38px; display: flex; align-items: center; justify-content: center; border-radius: 8px; transition: 0.2s; border: none !important; }
    .btn-edit { background-color: #0dcaf0 !important; color: #000 !important; }
    .btn-delete { background-color: #e63946 !important; color: #fff !important; }
    .btn-action:hover { transform: scale(1.1); opacity: 0.9; }

    @media (max-width: 768px) {
        .table thead { display: none; }
        .table tr { display: block; background: #1a1a1a; margin-bottom: 15px; border: 1px solid #333; border-radius: 12px; padding: 10px; }
        .table td { display: flex; justify-content: space-between; align-items: center; border: none !important; padding: 8px !important; }
        .table td::before { content: attr(data-label); font-weight: bold; color: #e63946; font-size: 0.75rem; text-transform: uppercase; }

        .img-cell::before { display: none; }
        .img-cell { justify-content: center !important; border-bottom: 1px solid #333 !important; margin-bottom: 5px; padding-bottom: 15px !important; }
        .pizza-img { width: 80px; height: 80px; }

        .actions-cell::before { display: none; }
        .actions-cell { border-top: 1px solid #333 !important; margin-top: 5px; padding-top: 15px !important; justify-content: center !important; }
        .actions-group { width: 100%; gap: 20px; }
        .btn-action { flex: 1; height: 45px; } /* На мобилках кнопки удобнее для пальца */
    }
</style>

<nav th:replace="~{fragments/layout :: header}"></nav>

<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2>Správa pízz</h2>
        <a href="/admin/pizzas/add" class="btn btn-success shadow-sm">
            <i class="bi bi-plus-lg"></i> Pridať
        </a>
    </div>

    <div class="table-container shadow-lg">
        <div class="table-responsive">
            <table class="table align-middle">
                <thead>
                <tr>
                    <th>Obrázok</th>
                    <th>Názov</th>
                    <th>Slug</th>
                    <th>Ceny</th>
                    <th>Stav</th>
                    <th class="text-center">Akcie</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="pizza : ${pizzas}">
                    <td class="img-cell">
                        <img th:src="${pizza.obrazokUrl}" class="pizza-img" alt="img">
                    </td>
                    <td data-label="Názov"><strong class="pizza-name" th:text="${pizza.nazov}">Margarita</strong></td>
                    <td data-label="Slug"><span class="pizza-slug-text" th:text="${pizza.slug}">margarita</span></td>
                    <td data-label="Ceny">
                        <span th:each="v : ${pizza.velkosti}" class="price-badge me-1">
                            <span th:text="${v.cena}"></span>€
                        </span>
                    </td>
                    <td data-label="Stav">
                        <span th:if="${pizza.aktivna}" class="badge badge-active">Aktívna</span>
                        <span th:unless="${pizza.aktivna}" class="badge badge-hidden">Skrytá</span>
                    </td>
                    <td class="actions-cell">
                        <div class="actions-group">
                            <a th:href="@{/admin/pizzas/edit/{id}(id=${pizza.id})}" class="btn-action btn-edit" title="Upraviť">
                                <i class="bi bi-pencil-fill"></i>
                            </a>
                            <form th:action="@{/admin/pizzas/delete/{id}(id=${pizza.id})}" method="post"
                                  onsubmit="return confirm('Naozaj zmazať?');" style="margin:0; flex: 1; display: flex;">
                                <button type="submit" class="btn-action btn-delete" style="width: 100%;">
                                    <i class="bi bi-trash-fill"></i>
                                </button>
                            </form>
                        </div>
                    </td>
                </tr>
                </tbody>
            </table>
        </div>
    </div>
</div>

<div th:replace="~{fragments/layout :: footer}"></div>
</body>
</html>